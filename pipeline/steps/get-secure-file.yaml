parameters:
  - name: fileName
    type: string
  - name: variableName
    type: string

steps:
  - task: DownloadSecureFile@1
    name: ${{ parameters.fileName }}
    displayName: 'Download ${{ parameters.fileName }}'
    inputs:
        secureFile: '${{ parameters.fileName }}'
  
  - bash: |
      fileJson=$(jq -c . $(${{ parameters.fileName }}.secureFilePath))

      echo "${variableName} is ${fileJson}"
      echo "##vso[task.setvariable variable=$variableName;isOutput=true]$fileJson"